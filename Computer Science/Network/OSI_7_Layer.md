# OSI 7 계층
> 네트워크에서 통신이 일어나는 과정을 7단계로 나눈 것을 말합니다.

![image](https://user-images.githubusercontent.com/37105602/217218579-220925eb-22ff-4483-9c6f-bdf84db6a7c6.png)

* [1계층 - 물리계층(Physical Layer)](#1계층---물리계층physical-layer)  
* [2계층 - 데이터 링크계층(DataLink Layer)](#2계층---데이터-링크계층datalink-layer)  
* [3계층 - 네트워크 계층(Network Layer)](#3계층---네트워크-계층network-layer)  
* [4계층 - 전송 계층(Transport Layer)](#4계층---전송-계층transport-layer)  
* [5계층 - 세션 계층(Session Layer)](#5계층---세션-계층session-layer)  
* [6계층 - 표현 계층(Presentation Layer)](#6계층---표현-계층presentation-layer)  
* [7계층 - 응용 계층(Application Layer)](#7계층---응용-계층application-layer) 
---
### 7계층을 나눈 이유
통신 흐름을 단계별로 알 수 있고, 특정한 곳에 이상이 생기면 그 단계만 수정할 수 있기 때문입니다.

---
## 1계층 - 물리계층(Physical Layer)
> 리피터, 케이블, 허브 등  

**물리계층**은 최하위 계층으로 주로 전기적, 기계적, 기능적인 특성을 이용하여 통신 케이블로 데이터를 전송하게 됩니다.  
통신 단위는 **비트**이며 이것은 1과 0으로 나타내어지는, 즉 전기적으로 On, Off 상태라고 생각하면 됩니다.  
이 계층은 단지 `데이터를 전송하는 역할`만 하며 `데이터가 무엇인지, 어떤 에러가 있는지 등에는 전혀 신경을 쓰지 않습니다.`

---
## 2계층 - 데이터 링크계층(DataLink Layer)
> 브릿지, 스위치 등

물리 계층에서 수신하거나 물리 계층으로 송신되는 `정보를 관리하여 안전하게 전달`되도록 도와주는 역할을 합니다.  
따라서 통신에서의 오류도 찾아주고 재전송도 하는 기능을 가지고 있습니다.

-> 브릿지나 스위치를 통해 `맥주소`를 가지고 물리계층에서 받은 정보를 전달  

주소 값은 물리적으로 할당 받는데, 이는 네트워크 카드가 만들어질 때부터 **맥 주소(MAC address)**가 정해져 있다는 뜻입니다.  
주소 체계는 계층이 없는 단일 구조이며, 데이터 링크 계층의 가장 잘 알려진 예는 **이더넷**입니다.

`프레임에 주소 부여(MAC - 물리적 주소)`  
`에러검출/재전송/흐름제어`

---
## 3계층 - 네트워크 계층(Network Layer)
> 라우터, IP

**데이터를 목적지까지 가장 안전하고 빠르게 전달하는 기능(라우팅)을 담당**합니다.  
라우터를 통해 이동할 경로를 선택하여 IP 주소를 지정하고, 해당 경로에 따라 패킷을 전달합니다.

네트워크 계층은 라우팅, 흐름 제어, 오류 제어, 세그먼테이션, 인터네트워킹 등을 수행합니다.  
라우터가 이 계층에서 동작하고 이 계층에서 동작하는 스위치도 있습니다.  
데이터를 연결하는 다른 네트워크를 통해 전달함으로써 인터넷이 가능하게 만드는 계층입니다.  
논리적인 주소 구조(IP), 곧 네트워크 관리자가 직접 주소를 할당하는 구조를 가지며, 계층적(hierarchical)입니다.

`주소부여(IP), 경로설정(Route)`

### ***IP 계층***
> TCP/IP 상에서 IP 계층이란 네트워크의 주소(IP 주소)를 정의합니다.  
`IP 패킷의 전달 및 라우팅을 담당하는 계층`

OSI 7계층 모델의 관점에서 IP계층은 네트워크 계층에 해당합니다.  
즉, 패킷을 목적지까지 전달하는 역할 및 그에 수반되는 기타 역할을 합니다.

- IP 계층의 주요 역할
    - 하위 계층인 데이터링크 계층의 하드웨어적인 특성에 관계없이 독립적인 역할을 수행

- IP 계층 상에 있는 주요 프로토콜
    - 패킷의 전달을 책임지는 IP
    - 패킷 전달 에러의 보고 및 진단을 위한 ICMP
    - 복잡한 네트워크에서 인터네트워킹을 위한 경로를 찾게해주는 라우팅 프로토콜

### ***IP 프로토콜***
> TCP/IP 기반의 인터넷 망을 통하여 데이터그램의 전달을 담당하는 프로토콜

- 주요기능
    - IP 계층에서 IP 패킷의 라우팅 대상 (Routing)
    - IP 주소 지정 (Addressing)

- 주요 특징
    - `신뢰성(에러제어)` 및 `흐름제어` 기능이 전혀 없음  ☞ Best-Effort Service
        - 한편, 신뢰성을 확보하려면 IP 계층 위의 TCP와 같은 상위 트랜스포트 계층에 의존
    - 비연결성 데이터그램 방식으로 전달되는 프로토콜 ☞ Connectionless
    - 패킷의 완전한 전달(소실, 중복, 지연, 순서바뀜 등이 없게함)을 보장하지 않음 ☞ Unreliable
    - IP 패킷 헤더 내 수신 및 발신 주소를 포함 ☞ IPv4 헤더, IPv6헤더, IP주소
    - IP 헤더 내 바이트 전달 순서: 최상위 바이트(MSB)를 먼저 보냄 ☞ Big-endian
    - 경우에 따라, 단편화가 필요 ☞ IP단편화 참조
    - TCP, UDP, ICMP, IGMP 등이 IP 데이타그램에 실려서 전송

---
## 4계층 - 전송 계층(Transport Layer)
> TCP, UDP  

세션을 맺고 있는 사용자 사이의 종단간 신뢰성 있는 데이터 통신을 보장하며 **데이터의 분할과 재조립, 흐름제어, 오류제어, 혼잡 제어 등의 기능을 담당**하고 있습니다.  
이 계층까지는 물리적인 계층에 속합니다.

TCP와 UDP 프로토콜을 통해 통신을 활성화합니다.  
포트를 열어두고, 프로그램들이 전송을 할 수 있도록 제공해줍니다.

`패킷 생성(Assembly / Sequencing / Deassembly / Error detection / Request Repeat / Flow control) 및 전송`

- ***TCP 프로토콜 : 신뢰성, 연결지향적***
- ***UDP 프로토콜 : 비신뢰성, 비연결성, 실시간***

---
## 5계층 - 세션 계층(Session Layer)
> API, Socket

**데이터가 통신하기 위한 논리적 연결을 담당**합니다. 통신을 하기위한 대문이라고 보면 쉽습니다.  
하지만 4계층에서도 연결을 맺고 종료할 수 있기 때문에 어느 계층에서 통신이 끊어졌는지 판단하기엔 한계가 있습니다.  
그러므로 세션 계층은 4계층과 무관하게 응용 프로그램 관점에서 봐야합니다.  
세션 설정, 유지, 종료, 전송 중단시 복구 등의 기능이 있습니다.

- 통신하는 사용자들을 동기화하고 오류복구 명령들을 일관적으로 다룸  
- 통신을 하기 위한 세션을 확립/유지/중단 (운영체제가 함)

`TCP / IP 세션을 만들고 없애는 책임을 집니다`

---
## 6계층 - 표현 계층(Presentation Layer)
> JPEG, MPEG 등  

데이터 표현에 대한 독립성을 제공하고 암호화하는 역할을 담당합니다.

표현 계층은 코드 간의 번역을 담당하여 사용자 시스템에서 데이터의 형식상 차이를 다루는 부담을 응용 계층으로 덜어 줍니다.

예) EBCDIC로 인코딩 된 문서 파일 -> ASCII로 인코딩 된 파일로 변경  

`파일 인코딩, 명령어를 포장, 압축, 암호화`


---
## 7계층 - 응용 계층(Application Layer)
> HTTP, FTP, DNS 등
응용 계층은 최종 목적지로, 응용 프로세스와 직접 관계하여 일반적인 **응용 서비스를 수행**합니다.

사용자 인터페이스, 전자우편, 데이터베이스 관리 등의 서비스를 제공합니다.

`네트워크 소프트웨어 UI부분, 사용자의 입출력(I/O)부분`

### ***HTTP 프로토콜***
웹 상에서 웹 서버 및 웹 브라우저 상호 간의 데이터 전송을 위한 응용계층 프로토콜입니다.  
처음엔 WWW 상의 하이퍼텍스트 형태의 문서를 전달하는데 주로 이용했었지만,  
현재에는 이미지, 비디오, 음성 등 거의 모든 형식의 데이터가 전송 가능합니다.

1. **요청 및 응답의 구조**  
동작 형태가 클라이언트 / 서버 모델로 동작합니다.
2. **메시지 교환 형태의 프로토콜**  
    - 클라이언트와 서버 간에 `HTTP 메세지`를 주고 받으며 통신
    - HTTP의 응답 및 요청 메시지를 구성
    - HTTP 메시지 내 헤더 항목들
3. **트랜젝션 중심의 비연결성 프로토콜**
    - 종단간 연결이 없음 (Connectionless)
    - 이전의 상태를 유지하지 않음 (Stateless)
4. **전송계층 프로토콜 및 사용 포트 번호**
    - 전송계층 프로토콜 : TCP
    - 사용 포트 번호 : 80번

---
## Reference
https://shlee0882.tistory.com/110